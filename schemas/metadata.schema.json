{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Staj Raporu Metadata Şeması",
  "description": "Staj raporu için metadata şeması - puan, kriterler, dosya bilgileri",
  "type": "object",
  "required": [
    "report_id",
    "filename",
    "timestamp",
    "file_paths"
  ],
  "properties": {
    "report_id": {
      "type": "string",
      "description": "Benzersiz rapor tanımlayıcısı (örn: report_001, report_042)",
      "pattern": "^report_[0-9]{3}$",
      "examples": ["report_001", "report_042", "report_150"]
    },
    "filename": {
      "type": "string",
      "description": "Orijinal dosya adı (PDF veya DOCX)",
      "examples": ["report_001.pdf", "report_042.docx"]
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Metadata oluşturulma zamanı (ISO 8601)"
    },
    "version": {
      "type": "string",
      "description": "Metadata versiyonu",
      "default": "v1",
      "examples": ["v1", "v2", "v3"]
    },
    "scores": {
      "type": "object",
      "description": "Rapor puanları (rubric'e göre)",
      "properties": {
        "total": {
          "type": "number",
          "description": "Toplam puan (0-100)",
          "minimum": 0,
          "maximum": 100,
          "examples": [85.5, 72.3, 90.0]
        },
        "sections": {
          "type": "object",
          "description": "Bölüm bazlı puanlar (rubric ağırlıklarına göre)",
          "properties": {
            "executive_summary": {
              "type": "number",
              "description": "Executive Summary puanı (6% ağırlık)",
              "minimum": 0,
              "maximum": 10
            },
            "company_sector": {
              "type": "number",
              "description": "Company and Sector puanı (8% ağırlık)",
              "minimum": 0,
              "maximum": 10
            },
            "professional_ethical": {
              "type": "number",
              "description": "Professional and Ethical Responsibilities puanı (8% ağırlık)",
              "minimum": 0,
              "maximum": 10
            },
            "activity_analysis": {
              "type": "number",
              "description": "Activity Analysis / Project puanı (40% ağırlık - EN ÖNEMLİ)",
              "minimum": 0,
              "maximum": 10
            },
            "conclusion": {
              "type": "number",
              "description": "Conclusion puanı (6% ağırlık)",
              "minimum": 0,
              "maximum": 10
            },
            "impact": {
              "type": "number",
              "description": "Impact puanı (8% ağırlık, Conclusion altında)",
              "minimum": 0,
              "maximum": 10
            },
            "team_work": {
              "type": "number",
              "description": "Team Work puanı (6% ağırlık, Conclusion altında)",
              "minimum": 0,
              "maximum": 10
            },
            "self_directed_learning": {
              "type": "number",
              "description": "Self-directed Learning puanı (8% ağırlık, Conclusion altında)",
              "minimum": 0,
              "maximum": 10
            },
            "format_organisation": {
              "type": "number",
              "description": "Format and Organisation puanı (10% ağırlık)",
              "minimum": 0,
              "maximum": 10
            }
          }
        }
      }
    },
    "criteria": {
      "type": "object",
      "description": "Rubric kriterleri (her bölüm için detaylı değerlendirme)",
      "properties": {
        "executive_summary": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string",
              "description": "Puanlama kanıtı (alıntı)"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "İyileştirme önerileri"
            },
            "weight": {
              "type": "number",
              "description": "Ağırlık (yüzde)",
              "const": 6
            }
          }
        },
        "company_sector": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 8
            }
          }
        },
        "professional_ethical": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 8
            }
          }
        },
        "activity_analysis": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 40
            }
          }
        },
        "conclusion": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 6
            }
          }
        },
        "impact": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 8
            }
          }
        },
        "team_work": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 6
            }
          }
        },
        "self_directed_learning": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 8
            }
          }
        },
        "format_organisation": {
          "type": "object",
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 10
            },
            "evidence": {
              "type": "string"
            },
            "suggestions": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "weight": {
              "type": "number",
              "const": 10
            }
          }
        }
      }
    },
    "file_paths": {
      "type": "object",
      "required": ["raw_file"],
      "description": "İlgili dosya yolları",
      "properties": {
        "raw_file": {
          "type": "string",
          "description": "Ham PDF/DOCX dosyası yolu",
          "examples": ["data/raw/report_001.pdf"]
        },
        "text_file": {
          "type": "string",
          "description": "Çıkarılmış metin dosyası yolu",
          "examples": ["data/processed/texts/report_001.txt"]
        },
        "segmentation_file": {
          "type": "string",
          "description": "Bölümleme çıktısı dosyası yolu",
          "examples": ["data/processed/segmentations/report_001_segmentation.json"]
        },
        "metadata_file": {
          "type": "string",
          "description": "Bu metadata dosyası yolu",
          "examples": ["data/processed/metadata/report_001_metadata.json"]
        }
      }
    },
    "processing_info": {
      "type": "object",
      "description": "İşleme bilgileri",
      "properties": {
        "extraction_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Metin çıkarma zamanı"
        },
        "segmentation_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Bölümleme zamanı"
        },
        "scoring_timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Puanlama zamanı"
        },
        "extraction_method": {
          "type": "string",
          "description": "Metin çıkarma yöntemi",
          "examples": ["pdfplumber", "PyPDF2", "python-docx"]
        },
        "segmentation_method": {
          "type": "string",
          "description": "Bölümleme yöntemi",
          "examples": ["gemini-2.0-flash", "gpt-4o-mini"]
        },
        "scoring_method": {
          "type": "string",
          "description": "Puanlama yöntemi",
          "examples": ["llm-based", "rule-based", "hybrid"]
        }
      }
    },
    "file_hash": {
      "type": "string",
      "description": "Ham dosyanın SHA-256 hash'i (doğrulama için)",
      "pattern": "^[a-f0-9]{64}$",
      "examples": ["a1b2c3d4e5f6..."]
    },
    "text_hash": {
      "type": "string",
      "description": "Çıkarılmış metnin SHA-256 hash'i",
      "pattern": "^[a-f0-9]{64}$"
    },
    "dataset_split": {
      "type": "string",
      "enum": ["train", "test", "validation", null],
      "description": "Veri seti ayrımı (train/test)"
    },
    "notes": {
      "type": "string",
      "description": "Ek notlar veya açıklamalar"
    }
  }
}

